<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ma.rest.mapper.dao.MaUserInfoMapper">

    <resultMap id="baseResultMap" type="com.ma.rest.pojo.MaUserInfo" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="user_id" property="userId" jdbcType="INTEGER" />
        <result column="nickname" property="nickName" jdbcType="VARCHAR" />
        <result column="phone" property="phone" jdbcType="VARCHAR" />
        <result column="head_img" property="headImg" jdbcType="VARCHAR" />
        <result column="reg_time" property="regTime" jdbcType="TIMESTAMP" />
        <result column="last_login_time" property="lastLoginTime" jdbcType="TIMESTAMP" />
        <result column="appVersion" property="appVersion" jdbcType="VARCHAR" />
        <result column="status" property="status" jdbcType="VARCHAR" />
        <result column="back_img" property="backImg" jdbcType="VARCHAR" />
        <result column="category_id" property="categoryId" jdbcType="VARCHAR"/>
        <result column="type" property="type" jdbcType="VARCHAR"/>
        <result column="sign" property="sign" jdbcType="VARCHAR"/>
        <result column="is_choice" property="isChoice" jdbcType="VARCHAR"/>
        <result column="business_introduction" property="businessIntroduction" jdbcType="VARCHAR"/>
    </resultMap>


    <select id="selectUserInfo" resultMap="baseResultMap" parameterType="com.ma.rest.pojo.MaUserInfo">
        select user_id,
        nickname,
        phone,
        head_img,
        reg_time,
        last_login_time,
        appVersion,
        status,
        back_img,
        type,
        category_id,
        sign,
        business_introduction
        from ma_user_info
        where 1=1
        <if test="phone!=null">
            and phone=#{phone}
        </if>
        <if test="password!=null">
            and password=#{password}
        </if>
        <if test="userId!=null">
            and user_id=#{userId}
        </if>
        <if test="userToken != null">
            and user_token=#{userToken}
        </if>
        <if test="categoryId != null">
            and category_id=#{categoryId}
        </if>
        <if test="type ==null || type==0">
            and type!=1
        </if>
        <if test="type ==1">
            and type=1
        </if>

    </select>

    <select id="selectCountUserInfo" resultType="java.lang.Integer" parameterType="java.util.Map">
        select count(1)
        from ma_user_info
        where 1=1
        <if test="phone!=null">
            and phone=#{phone}
        </if>
        <if test="password!=null">
            and password=#{password}
        </if>
        <if test="userToken != null">
            and user_token=#{userToken}
        </if>
        <if test="categoryId != null">
            and category_id=#{categoryId}
        </if>

    </select>

    <select id="selectUserInfoList" resultMap="baseResultMap" parameterType="java.util.Map">
        select user_id,
        nickname,
        phone,
        head_img,
        reg_time,
        last_login_time,
        appVersion,
        status,
        back_img,
        type,
        category_id,
        is_choice
        from ma_user_info
        where 1=1
        <if test="phone!=null">
            and phone=#{phone}
        </if>
        <if test="password!=null">
            and password=#{password}
        </if>
        <if test="userToken != null">
            and user_token=#{userToken}
        </if>
        <if test="categoryId != null">
            and category_id=#{categoryId}
        </if>
        LIMIT #{offset}, #{pageSize}
    </select>


    <update id="updateByUserInfo" parameterType="com.ma.rest.pojo.MaUserInfo">
       update ma_user_info
       <trim prefix="set" suffixOverrides=",">
           <if test="headImg!=null">
               head_img=#{headImg},
           </if>
           <if test="userToken!=null">
               user_token=#{userToken},
           </if>
           <if test="password!=null">
               password=#{password},
           </if>
           <if test="lastLoginTime!=null">
               last_login_time=#{lastLoginTime},
           </if>
           <if test="appVersion!=null">
               appVersion=#{appVersion},
           </if>
           <if test="status!=null">
               status=#{status},
           </if>
           <if test="backImg!=null">
               back_img=#{backImg},
           </if>

           <if test="sign!=null">
               sign=#{sign},
           </if>

           <if test="nickName!=null">
               nickname=#{nickName},
           </if>
       </trim>
        where 1=1
        <if test="phone!=null">
           and  phone=#{phone}
        </if>

        <if test="phone==null">
            <if test="userToken!=null ">
                and user_token=#{userToken}
            </if>
        </if>


    </update>
    <insert id="insertUserInfo" parameterType="com.ma.rest.pojo.MaUserInfo" useGeneratedKeys="true" keyProperty="userId" >
     insert into ma_user_info

        <trim prefix="(" suffix=")" suffixOverrides="," >
            <if test="nickName != null" >
                nickname,
            </if>
            <if test="phone != null" >
                phone,
            </if>
            <if test="headImg != null" >
                head_img,
            </if>
            <if test="userToken != null" >
                user_token,
            </if>
            <if test="password != null" >
                password,
            </if>
            <if test="backImg != null" >
                back_img,
            </if>
            <if test="appVersion != null" >
                appVersion,
            </if>
            <if test="type != null" >
                type,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides="," >
            <if test="nickName != null" >
                #{nickName,jdbcType=VARCHAR},
            </if>
            <if test="phone != null" >
                #{phone,jdbcType=VARCHAR},
            </if>

            <if test="headImg != null" >
                #{headImg,jdbcType=VARCHAR},
            </if>
            <if test="userToken != null" >
                #{userToken,jdbcType=VARCHAR},
            </if>
            <if test="password != null" >
                #{password,jdbcType=VARCHAR},
            </if>
            <if test="backImg != null" >
                #{backImg,jdbcType=VARCHAR},
            </if>
            <if test="appVersion != null" >
                #{appVersion,jdbcType=VARCHAR},
            </if>
            <if test="type != null" >
                #{type,jdbcType=VARCHAR},
            </if>

        </trim>
    </insert>


</mapper>